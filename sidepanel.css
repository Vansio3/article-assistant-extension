/* sidepanel.css */

/* 1. Global Styles & Variables */
:root {
    --background-color: #f7f8fa; --text-color: #333; --header-bg: #fff; --border-color: #e1e4e8; --primary-color: #007bff; --primary-text: #fff; --icon-bg: #e9ecef;
}
@media (prefers-color-scheme: dark) {
    :root { --background-color: #202124; --text-color: #e8eaed; --header-bg: #2d2e31; --border-color: #3c4043; --primary-color: #8ab4f8; --primary-text: #202124; --icon-bg: #3c4043; }
}
body { margin: 0; font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif; background-color: var(--background-color); color: var(--text-color); }

/* 2. App Layout */
.app-container { display: flex; flex-direction: column; height: 100vh; }
.panel-header { padding: 12px 16px; border-bottom: 1px solid var(--border-color); background-color: var(--header-bg); flex-shrink: 0; }
.panel-footer { padding: 12px 16px; border-top: 1px solid var(--border-color); background-color: var(--header-bg); flex-shrink: 0; }
.content-area { flex-grow: 1; overflow-y: auto; padding: 16px; display: grid; }
.mode-content { grid-area: 1 / 1; visibility: hidden; height: 100%; }
.mode-content.active { visibility: visible; }
.footer-content { display: none; }
.footer-content.active { display: flex; justify-content: space-between; align-items: center; width: 100%; }

/* 3. Mode Switching */
.mode-switcher { display: flex; gap: 4px; background-color: var(--icon-bg); border-radius: 8px; padding: 4px; }
.mode-btn { flex-grow: 1; border: none; background-color: transparent; color: var(--text-color); padding: 6px 12px; border-radius: 6px; font-size: 14px; font-weight: 500; cursor: pointer; transition: background-color 0.2s ease, color 0.2s ease; }
.mode-btn.active { background-color: var(--header-bg); color: var(--primary-color); }
.mode-btn:disabled { opacity: 0.5; cursor: not-allowed; }

/* 4. Summary View & States */
.view { display: none; flex-direction: column; align-items: center; text-align: center; height: 100%; justify-content: center; }
#content-container.welcome .welcome-view, #content-container.loading .loading-view, #content-container.summary .summary-view, #content-container.error .error-view { display: flex; }
.summary-view { align-items: flex-start; text-align: left; justify-content: flex-start; }
#summary-title { margin-top: 0; font-size: 18px; width: 100%; }
#summary-text { line-height: 1.6; white-space: pre-wrap; transition: font-size 0.2s ease-in-out; }
.icon { font-size: 32px; background-color: var(--icon-bg); width: 60px; height: 60px; border-radius: 50%; display: flex; align-items: center; justify-content: center; margin-bottom: 16px; }
.spinner { width: 40px; height: 40px; border: 4px solid var(--border-color); border-top-color: var(--primary-color); border-radius: 50%; animation: spin 1s linear infinite; margin-bottom: 16px; }
@keyframes spin { to { transform: rotate(360deg); } }

/* 5. Chat Interface */
#chat-mode-content { height: 100%; display: flex; flex-direction: column; }
#chat-history { display: flex; flex-direction: column; gap: 16px; flex-grow: 1; transition: font-size 0.2s ease-in-out; }
.message { padding: 10px 14px; border-radius: 18px; max-width: 85%; line-height: 1.5; }
.message.user { background-color: var(--primary-color); color: var(--primary-text); border-bottom-right-radius: 4px; align-self: flex-end; }
.message.assistant { background-color: var(--icon-bg); color: var(--text-color); border-bottom-left-radius: 4px; align-self: flex-start; }
#chat-typing-indicator { display: none; align-self: flex-start; }
.typing-dots span { display: inline-block; width: 8px; height: 8px; border-radius: 50%; background-color: currentColor; margin: 0 1px; animation: bounce 1s infinite; }
.typing-dots span:nth-child(2) { animation-delay: 0.2s; }
.typing-dots span:nth-child(3) { animation-delay: 0.4s; }
@keyframes bounce { 0%, 60%, 100% { transform: translateY(0); } 30% { transform: translateY(-4px); } }

/* 6. Footer Controls */
.action-button { border: none; background-color: var(--primary-color); color: var(--primary-text); padding: 10px 16px; font-size: 14px; font-weight: 500; border-radius: 6px; cursor: pointer; transition: opacity 0.2s ease; }
.action-button:hover { opacity: 0.9; }
.action-button:disabled { opacity: 0.5; cursor: not-allowed; }
.text-size-controls { display: flex; gap: 8px; }
.size-control-button { background-color: transparent; border: 1px solid var(--border-color); color: var(--text-color); width: 36px; height: 36px; border-radius: 6px; cursor: pointer; font-size: 14px; font-weight: 500; transition: background-color 0.2s ease; }
.size-control-button:hover { background-color: var(--border-color); }
.size-control-button:disabled { opacity: 0.4; cursor: not-allowed; background-color: transparent; }
#chat-form { display: flex; gap: 8px; width: 100%; }
#chat-input { flex-grow: 1; border: 1px solid var(--border-color); background-color: var(--background-color); border-radius: 20px; padding: 8px 16px; font-size: 14px; color: var(--text-color); }
#chat-input:focus { outline: none; border-color: var(--primary-color); }
#chat-send-btn { border: none; background-color: var(--primary-color); border-radius: 50%; width: 40px; height: 40px; cursor: pointer; flex-shrink: 0; display: flex; align-items: center; justify-content: center; transition: opacity 0.2s ease; }
#chat-send-btn img { width: 20px; height: 20px; }
#chat-send-btn:hover { opacity: 0.9; }
#chat-send-btn:disabled { opacity: 0.5; cursor: not-allowed; }